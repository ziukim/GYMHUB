-- ============================================
-- ATT_CACHE 테이블 구조 변경 마이그레이션 스크립트
-- 기존 구조에서 새 구조로 변경
-- ============================================

-- 1. GYM 테이블의 ATT_CACHE_NO FK 제약조건 제거
ALTER TABLE GYM DROP CONSTRAINT FK_GYM_ATT_CACHE;

-- 2. GYM 테이블의 ATT_CACHE_NO 컬럼 제거
ALTER TABLE GYM DROP COLUMN ATT_CACHE_NO;

-- 3. ATT_CACHE 테이블의 기존 데이터 백업 (필요시)
-- CREATE TABLE ATT_CACHE_BACKUP AS SELECT * FROM ATT_CACHE;

-- 4. ATT_CACHE 테이블의 기존 데이터 삭제 (새 구조로 변경하므로)
-- TRUNCATE를 사용하여 모든 데이터 삭제 (더 빠르고 효율적)
TRUNCATE TABLE ATT_CACHE;

-- 5. ATT_CACHE 테이블의 기존 컬럼 제거
ALTER TABLE ATT_CACHE DROP COLUMN AVERAGE_COUNT;
ALTER TABLE ATT_CACHE DROP COLUMN MIN_COUNT;
ALTER TABLE ATT_CACHE DROP COLUMN MAX_COUNT;

-- 6. ATT_CACHE 테이블의 PK 제약조건 제거 (컬럼명 변경을 위해)
ALTER TABLE ATT_CACHE DROP CONSTRAINT PK_ATT_CACHE;

-- 7. ATT_CACHE 테이블의 ATT_CACHE_NO 컬럼명을 CACHE_DETAIL_NO로 변경
ALTER TABLE ATT_CACHE RENAME COLUMN ATT_CACHE_NO TO CACHE_DETAIL_NO;

-- 8. ATT_CACHE 테이블에 새 컬럼 추가
ALTER TABLE ATT_CACHE ADD GYM_NO NUMBER NOT NULL;
ALTER TABLE ATT_CACHE ADD CACHE_DATE DATE NOT NULL;
ALTER TABLE ATT_CACHE ADD TIME_SLOT VARCHAR2(10) NOT NULL;
ALTER TABLE ATT_CACHE ADD MEMBER_COUNT NUMBER NOT NULL;

-- 9. ATT_CACHE 테이블의 PK 제약조건 재생성
ALTER TABLE ATT_CACHE ADD CONSTRAINT PK_ATT_CACHE PRIMARY KEY (CACHE_DETAIL_NO);

-- 10. ATT_CACHE 테이블의 FK 제약조건 추가
ALTER TABLE ATT_CACHE ADD CONSTRAINT FK_ATT_CACHE_GYM FOREIGN KEY (GYM_NO) REFERENCES GYM(GYM_NO);

-- 11. 시퀀스 이름 변경 (기존 시퀀스가 있다면)
-- 기존 시퀀스 삭제
DROP SEQUENCE SEQ_ATT_CACHE_NO;

-- 새 시퀀스 생성
CREATE SEQUENCE SEQ_ATT_CACHE_DETAIL_NO START WITH 1 INCREMENT BY 1;

-- 12. 컬럼 코멘트 추가
COMMENT ON COLUMN ATT_CACHE.CACHE_DETAIL_NO IS '출결 캐시 상세 번호(PK)';
COMMENT ON COLUMN ATT_CACHE.GYM_NO IS '헬스장 번호(FK)';
COMMENT ON COLUMN ATT_CACHE.CACHE_DATE IS '캐시 날짜';
COMMENT ON COLUMN ATT_CACHE.TIME_SLOT IS '시간대 구간(예: 06-08, 08-10, 10-12, ... 20-22, 22-24)';
COMMENT ON COLUMN ATT_CACHE.MEMBER_COUNT IS '해당 시간대 평균 인원수';

-- ============================================
-- 마이그레이션 완료
-- ============================================
-- 주의: 기존 ATT_CACHE 데이터는 모두 삭제되었습니다.
-- 시간대별 혼잡도 데이터는 배치 작업을 통해 자동으로 생성됩니다.

-- ============================================
-- ATT_CACHE 테이블 더미데이터 생성
-- GYM_NO = 9, 최근 4일치 데이터 (총 36개)
-- ============================================

-- 4일 전 데이터 (9개 시간대)
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '06-08', 15);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '08-10', 20);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '10-12', 28);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '12-14', 32);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '14-16', 38);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '16-18', 45);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '18-20', 55);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '20-22', 42);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 4, '22-24', 22);

-- 3일 전 데이터 (9개 시간대)
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '06-08', 12);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '08-10', 18);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '10-12', 25);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '12-14', 30);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '14-16', 35);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '16-18', 48);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '18-20', 60);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '20-22', 45);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 3, '22-24', 18);

-- 2일 전 데이터 (9개 시간대)
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '06-08', 18);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '08-10', 22);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '10-12', 30);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '12-14', 35);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '14-16', 42);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '16-18', 52);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '18-20', 65);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '20-22', 48);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 2, '22-24', 25);

-- 1일 전 데이터 (9개 시간대)
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '06-08', 16);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '08-10', 21);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '10-12', 27);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '12-14', 33);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '14-16', 40);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '16-18', 50);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '18-20', 58);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '20-22', 44);
INSERT INTO ATT_CACHE VALUES (SEQ_ATT_CACHE_DETAIL_NO.NEXTVAL, 9, TRUNC(SYSDATE) - 1, '22-24', 20);

COMMIT;

-- ============================================
-- 더미데이터 생성 완료
-- 총 36개 레코드 (4일 * 9시간대)
-- GYM_NO = 9
-- 시간대별 인원수 패턴:
--   - 아침(06-10): 12-22명
--   - 오전(10-12): 25-30명
--   - 점심(12-14): 30-35명
--   - 오후(14-16): 35-42명
--   - 저녁(16-18): 45-52명
--   - 피크(18-20): 55-65명
--   - 밤(20-22): 42-48명
--   - 심야(22-24): 18-25명
-- ============================================

-- ============================================
-- ATTENDANCE 테이블 더미 데이터 생성
-- 헬스장 번호 21, 1~4일 전 입실/퇴실 기록
-- ============================================

-- 4일 전 데이터 (다양한 시간대)
-- 아침 시간대 (06-08)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 4) + 6/24 + 30/1440);  -- 06:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 4) + 7/24 + 45/1440);  -- 07:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 4) + 7/24 + 15/1440);  -- 07:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 4) + 8/24 + 20/1440);  -- 08:20

-- 오전 시간대 (08-10)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 4) + 8/24 + 30/1440);  -- 08:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 4) + 9/24 + 45/1440);  -- 09:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 4) + 9/24 + 10/1440);  -- 09:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 4) + 10/24 + 15/1440); -- 10:15

-- 오전 시간대 (10-12)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 4) + 10/24 + 20/1440); -- 10:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 4) + 11/24 + 30/1440); -- 11:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 4) + 11/24 + 5/1440);  -- 11:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 4) + 12/24 + 10/1440); -- 12:10

-- 점심 시간대 (12-14)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 4) + 12/24 + 30/1440); -- 12:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 4) + 13/24 + 45/1440); -- 13:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 4) + 13/24 + 15/1440); -- 13:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 4) + 14/24 + 20/1440); -- 14:20

-- 오후 시간대 (14-16)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 4) + 14/24 + 30/1440); -- 14:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 4) + 15/24 + 45/1440); -- 15:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 4) + 15/24 + 10/1440); -- 15:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 4) + 16/24 + 15/1440); -- 16:15

-- 저녁 시간대 (16-18)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 4) + 16/24 + 30/1440); -- 16:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 4) + 17/24 + 45/1440); -- 17:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 4) + 17/24 + 15/1440); -- 17:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 4) + 18/24 + 20/1440); -- 18:20

-- 저녁 피크 시간대 (18-20)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 4) + 18/24 + 30/1440); -- 18:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 4) + 19/24 + 45/1440); -- 19:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 4) + 19/24 + 10/1440); -- 19:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 4) + 20/24 + 15/1440); -- 20:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 4) + 18/24 + 45/1440); -- 18:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 4) + 20/24 + 5/1440);  -- 20:05

-- 밤 시간대 (20-22)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 4) + 20/24 + 30/1440); -- 20:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 4) + 21/24 + 45/1440); -- 21:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 4) + 21/24 + 10/1440); -- 21:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 4) + 22/24 + 15/1440); -- 22:15

-- 심야 시간대 (22-24)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 4) + 22/24 + 30/1440); -- 22:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 4) + 23/24 + 20/1440); -- 23:20

-- ============================================
-- 3일 전 데이터
-- ============================================
-- 아침 시간대 (06-08)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 3) + 6/24 + 45/1440);  -- 06:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 3) + 8/24 + 10/1440);  -- 08:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 3) + 7/24 + 20/1440);  -- 07:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 3) + 8/24 + 30/1440);  -- 08:30

-- 오전 시간대 (08-10)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 3) + 8/24 + 45/1440);  -- 08:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 3) + 9/24 + 50/1440);  -- 09:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 3) + 9/24 + 25/1440);  -- 09:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 3) + 10/24 + 30/1440); -- 10:30

-- 오전 시간대 (10-12)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 3) + 10/24 + 15/1440); -- 10:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 3) + 11/24 + 40/1440); -- 11:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 3) + 11/24 + 20/1440); -- 11:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 3) + 12/24 + 25/1440); -- 12:25

-- 점심 시간대 (12-14)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 3) + 12/24 + 40/1440); -- 12:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 3) + 13/24 + 50/1440); -- 13:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 3) + 13/24 + 25/1440); -- 13:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 3) + 14/24 + 35/1440); -- 14:35

-- 오후 시간대 (14-16)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 3) + 14/24 + 40/1440); -- 14:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 3) + 15/24 + 55/1440); -- 15:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 3) + 15/24 + 20/1440); -- 15:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 3) + 16/24 + 25/1440); -- 16:25

-- 저녁 시간대 (16-18)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 3) + 16/24 + 40/1440); -- 16:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 3) + 17/24 + 55/1440); -- 17:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 3) + 17/24 + 25/1440); -- 17:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 3) + 18/24 + 30/1440); -- 18:30

-- 저녁 피크 시간대 (18-20)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 3) + 18/24 + 40/1440); -- 18:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 3) + 19/24 + 55/1440); -- 19:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 3) + 19/24 + 20/1440); -- 19:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 3) + 20/24 + 25/1440); -- 20:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 3) + 18/24 + 50/1440); -- 18:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 3) + 20/24 + 10/1440); -- 20:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 3) + 19/24 + 35/1440); -- 19:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 3) + 20/24 + 40/1440); -- 20:40

-- 밤 시간대 (20-22)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 3) + 20/24 + 50/1440); -- 20:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 3) + 21/24 + 55/1440); -- 21:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 3) + 21/24 + 30/1440); -- 21:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 3) + 22/24 + 35/1440); -- 22:35

-- 심야 시간대 (22-24)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 3) + 22/24 + 40/1440); -- 22:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 3) + 23/24 + 30/1440); -- 23:30

-- ============================================
-- 2일 전 데이터
-- ============================================
-- 아침 시간대 (06-08)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 2) + 6/24 + 15/1440);  -- 06:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 2) + 7/24 + 30/1440);  -- 07:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 2) + 7/24 + 5/1440);   -- 07:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 2) + 8/24 + 15/1440);  -- 08:15

-- 오전 시간대 (08-10)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 2) + 8/24 + 20/1440);  -- 08:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 2) + 9/24 + 35/1440);  -- 09:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 2) + 9/24 + 5/1440);   -- 09:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 2) + 10/24 + 20/1440); -- 10:20

-- 오전 시간대 (10-12)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 2) + 10/24 + 25/1440); -- 10:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 2) + 11/24 + 50/1440); -- 11:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 2) + 11/24 + 15/1440); -- 11:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 2) + 12/24 + 30/1440); -- 12:30

-- 점심 시간대 (12-14)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 2) + 12/24 + 45/1440); -- 12:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 2) + 13/24 + 55/1440); -- 13:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 2) + 13/24 + 30/1440); -- 13:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 2) + 14/24 + 40/1440); -- 14:40

-- 오후 시간대 (14-16)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 2) + 14/24 + 50/1440); -- 14:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 2) + 16/24 + 5/1440);  -- 16:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 2) + 15/24 + 15/1440); -- 15:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 2) + 16/24 + 20/1440); -- 16:20

-- 저녁 시간대 (16-18)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 2) + 16/24 + 35/1440); -- 16:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 2) + 18/24 + 5/1440);  -- 18:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 2) + 17/24 + 10/1440); -- 17:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 2) + 18/24 + 15/1440); -- 18:15

-- 저녁 피크 시간대 (18-20)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 2) + 18/24 + 25/1440); -- 18:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 2) + 19/24 + 40/1440); -- 19:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 2) + 19/24 + 5/1440);  -- 19:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 2) + 20/24 + 20/1440); -- 20:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 2) + 18/24 + 35/1440); -- 18:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 2) + 20/24 + 5/1440);  -- 20:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 2) + 19/24 + 15/1440); -- 19:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 2) + 20/24 + 30/1440); -- 20:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 2) + 19/24 + 45/1440); -- 19:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 2) + 20/24 + 50/1440); -- 20:50

-- 밤 시간대 (20-22)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 2) + 20/24 + 55/1440); -- 20:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 2) + 22/24 + 5/1440);  -- 22:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 2) + 21/24 + 20/1440); -- 21:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 2) + 22/24 + 25/1440); -- 22:25

-- 심야 시간대 (22-24)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 2) + 22/24 + 35/1440); -- 22:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 2) + 23/24 + 25/1440); -- 23:25

-- ============================================
-- 1일 전 데이터 (어제)
-- ============================================
-- 아침 시간대 (06-08)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 1) + 6/24 + 25/1440);  -- 06:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 1) + 7/24 + 40/1440);  -- 07:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 1) + 7/24 + 10/1440);  -- 07:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 1) + 8/24 + 25/1440);  -- 08:25

-- 오전 시간대 (08-10)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 1) + 8/24 + 35/1440);  -- 08:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 1) + 9/24 + 50/1440);  -- 09:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 1) + 9/24 + 15/1440);  -- 09:15
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 1) + 10/24 + 30/1440); -- 10:30

-- 오전 시간대 (10-12)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 1) + 10/24 + 35/1440); -- 10:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 1) + 11/24 + 55/1440); -- 11:55
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 1) + 11/24 + 25/1440); -- 11:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 1) + 12/24 + 40/1440); -- 12:40

-- 점심 시간대 (12-14)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 1) + 12/24 + 50/1440); -- 12:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 1) + 14/24 + 5/1440);  -- 14:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 1) + 13/24 + 35/1440); -- 13:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 1) + 14/24 + 45/1440); -- 14:45

-- 오후 시간대 (14-16)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '입실', TRUNC(SYSDATE - 1) + 15/24 + 5/1440);  -- 15:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 16, '퇴실', TRUNC(SYSDATE - 1) + 16/24 + 10/1440); -- 16:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '입실', TRUNC(SYSDATE - 1) + 15/24 + 25/1440); -- 15:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 17, '퇴실', TRUNC(SYSDATE - 1) + 16/24 + 30/1440); -- 16:30

-- 저녁 시간대 (16-18)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '입실', TRUNC(SYSDATE - 1) + 16/24 + 45/1440); -- 16:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 18, '퇴실', TRUNC(SYSDATE - 1) + 18/24 + 10/1440); -- 18:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '입실', TRUNC(SYSDATE - 1) + 17/24 + 20/1440); -- 17:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 19, '퇴실', TRUNC(SYSDATE - 1) + 18/24 + 25/1440); -- 18:25

-- 저녁 피크 시간대 (18-20)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '입실', TRUNC(SYSDATE - 1) + 18/24 + 30/1440); -- 18:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 20, '퇴실', TRUNC(SYSDATE - 1) + 19/24 + 45/1440); -- 19:45
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '입실', TRUNC(SYSDATE - 1) + 19/24 + 10/1440); -- 19:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 21, '퇴실', TRUNC(SYSDATE - 1) + 20/24 + 25/1440); -- 20:25
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '입실', TRUNC(SYSDATE - 1) + 18/24 + 40/1440); -- 18:40
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 22, '퇴실', TRUNC(SYSDATE - 1) + 20/24 + 10/1440); -- 20:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '입실', TRUNC(SYSDATE - 1) + 19/24 + 20/1440); -- 19:20
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 11, '퇴실', TRUNC(SYSDATE - 1) + 20/24 + 35/1440); -- 20:35
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '입실', TRUNC(SYSDATE - 1) + 19/24 + 50/1440); -- 19:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 12, '퇴실', TRUNC(SYSDATE - 1) + 20/24 + 55/1440); -- 20:55

-- 밤 시간대 (20-22)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '입실', TRUNC(SYSDATE - 1) + 21/24 + 5/1440);  -- 21:05
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 13, '퇴실', TRUNC(SYSDATE - 1) + 22/24 + 10/1440); -- 22:10
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '입실', TRUNC(SYSDATE - 1) + 21/24 + 30/1440); -- 21:30
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 14, '퇴실', TRUNC(SYSDATE - 1) + 22/24 + 40/1440); -- 22:40

-- 심야 시간대 (22-24)
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '입실', TRUNC(SYSDATE - 1) + 22/24 + 50/1440); -- 22:50
INSERT INTO ATTENDANCE VALUES (SEQ_ATTENDANCE_NO.NEXTVAL, 21, 15, '퇴실', TRUNC(SYSDATE - 1) + 23/24 + 40/1440); -- 23:40

COMMIT;

-- ============================================
-- 더미 데이터 생성 완료
-- ============================================
-- 헬스장 번호: 21
-- 기간: 1일 전 ~ 4일 전 (총 4일)
-- 회원 번호: 11 ~ 22 (12명)
-- 시간대별 분포:
--   - 06-08: 각 날짜별 2명씩 (총 8명)
--   - 08-10: 각 날짜별 2명씩 (총 8명)
--   - 10-12: 각 날짜별 2명씩 (총 8명)
--   - 12-14: 각 날짜별 2명씩 (총 8명)
--   - 14-16: 각 날짜별 2명씩 (총 8명)
--   - 16-18: 각 날짜별 2명씩 (총 8명)
--   - 18-20: 각 날짜별 4-5명씩 (총 18명) - 피크 시간대
--   - 20-22: 각 날짜별 2명씩 (총 8명)
--   - 22-24: 각 날짜별 1명씩 (총 4명)
-- 총 레코드 수: 약 78개 (입실/퇴실 쌍)
-- ============================================
DELETE FROM ATT_CACHE WHERE GYM_NO = 21;
COMMIT;


